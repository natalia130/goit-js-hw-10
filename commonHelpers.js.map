{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst inputDate = document.querySelector(\"#datetime-picker\");\nconst startButton = document.querySelector(\"[data-start]\");\nconst dataDays = document.querySelector(\"[data-days]\");\nconst dataHours = document.querySelector(\"[data-hours]\");\nconst dataMinutes = document.querySelector(\"[data-minutes]\");\nconst dataSeconds = document.querySelector(\"[data-seconds]\");\nlet userSelectedDate;\nstartButton.disabled = true;\ninputDate.disabled = false;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0].getTime() <= Date.now()) {\n            startButton.disabled = true;\n            iziToast.warning({\n                title: \"Warning!\",\n                message: \"Please choose a date in the future\",\n                position: 'topCenter',\n            });\n        } else {\n            userSelectedDate = new Date(selectedDates[0]);\n            startButton.disabled = false;\n        }\n    },\n};\nflatpickr(inputDate, options);\n\nstartButton.addEventListener(\"click\", () => {\n    timer.start();\n});\n\nclass Timer {\n    constructor(tick) {\n        this.intervalId = null;\n        this.tick = tick;\n    }\n    start() {\n        this.intervalId = setInterval(() => {\n            inputDate.disabled = true;\n            startButton.disabled = true;\n            const diff = userSelectedDate - Date.now();\n            const time = this.convertMs(diff);\n            this.tick(time);\n        }, 1000);\n    } \n    stop() {\n        clearInterval(this.intervalId);\n    }\n    convertMs(ms) {\n        // Number of milliseconds per unit of time\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        // Remaining days\n        const days = Math.floor(ms / day);\n        // Remaining hours\n        const hours = Math.floor((ms % day) / hour);\n        // Remaining minutes\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        // Remaining seconds\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n        \n        return { days, hours, minutes, seconds };\n    }\n}\n\nconst timer = new Timer(onTick);\n\nfunction onTick({ days, hours, minutes, seconds }) {\n    if (days <= 0 && hours <= 0 && minutes <= 0 && seconds <= 0) {\n        timer.stop();\n    }\n    dataDays.textContent = addLeadingZero(days);\n    dataHours.textContent = addLeadingZero(hours);\n    dataMinutes.textContent = addLeadingZero(minutes);\n    dataSeconds.textContent = addLeadingZero(seconds);\n}\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, \"0\");\n}"],"names":["inputDate","startButton","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","options","selectedDates","iziToast","flatpickr","timer","Timer","tick","diff","time","ms","days","hours","minutes","seconds","onTick","addLeadingZero","value"],"mappings":"+IAMA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EACJL,EAAY,SAAW,GACvBD,EAAU,SAAW,GAErB,MAAMO,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,CAAC,EAAE,QAAO,GAAM,KAAK,OACnCP,EAAY,SAAW,GACvBQ,EAAS,QAAQ,CACb,MAAO,WACP,QAAS,qCACT,SAAU,WAC1B,CAAa,IAEDH,EAAmB,IAAI,KAAKE,EAAc,CAAC,CAAC,EAC5CP,EAAY,SAAW,GAE9B,CACL,EACAS,EAAUV,EAAWO,CAAO,EAE5BN,EAAY,iBAAiB,QAAS,IAAM,CACxCU,EAAM,MAAK,CACf,CAAC,EAED,MAAMC,CAAM,CACR,YAAYC,EAAM,CACd,KAAK,WAAa,KAClB,KAAK,KAAOA,CACf,CACD,OAAQ,CACJ,KAAK,WAAa,YAAY,IAAM,CAChCb,EAAU,SAAW,GACrBC,EAAY,SAAW,GACvB,MAAMa,EAAOR,EAAmB,KAAK,IAAG,EAClCS,EAAO,KAAK,UAAUD,CAAI,EAChC,KAAK,KAAKC,CAAI,CACjB,EAAE,GAAI,CACV,CACD,MAAO,CACH,cAAc,KAAK,UAAU,CAChC,CACD,UAAUC,EAAI,CAQV,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CACL,CAEA,MAAMT,EAAQ,IAAIC,EAAMS,CAAM,EAE9B,SAASA,EAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC3CH,GAAQ,GAAKC,GAAS,GAAKC,GAAW,GAAKC,GAAW,GACtDT,EAAM,KAAI,EAEdT,EAAS,YAAcoB,EAAeL,CAAI,EAC1Cd,EAAU,YAAcmB,EAAeJ,CAAK,EAC5Cd,EAAY,YAAckB,EAAeH,CAAO,EAChDd,EAAY,YAAciB,EAAeF,CAAO,CACpD,CAEA,SAASE,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C"}